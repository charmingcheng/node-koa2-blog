webpackJsonp([4],{Nwhv:function(t,e){},"zAV/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"singleUpload",props:{name:{type:String,default:""},action:{type:String,default:""},data:{type:Object,default:function(){}},url:{type:String,default:void 0},title:{type:String,default:"头像"},width:{type:String,default:"60"},height:{type:String,default:"60"}},data:function(){return{hasImg:!1,uploadData:"",uploadImg:"",headers:{}}},computed:{uploadListStyle:function(){return{width:parseFloat(this.width)+2+"px",height:parseFloat(this.height)+2+"px",lineHeight:this.height+"px"}},uploadButtonStyle:function(){return{width:this.width+"px",height:this.height+"px",lineHeight:this.height+"px"}}},watch:{url:{handler:function(t,e){this.initData(t)},immediate:!0}},created:function(){this.headers={authKey:this.$Lockr.get("authKey"),sessionId:this.$Lockr.get("sessionId")}},methods:{initData:function(t){t?(this.hasImg=!0,this.uploadImg=t,this.uploadData=this.$imgHost+t):(this.hasImg=!1,this.uploadImg="",this.uploadData="")},handleSuccess:function(t,e){this.hasImg=!0,200===t.code?(this.uploadImg=t.data.filestr,this.uploadData=this.$imgHost+t.data.filestr,this.$emit("uploadData",t.data)):this.$Message.error("上传失败")},handleFormatError:function(t){this.$Message.error("请选择jpg、jpeg、png、gif格式的文件")},handleMaxSize:function(t){this.$Message.error("图片文件太大，已超过2M")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"y-single-upload-wrapper",class:{"ctrl-upload":t.hasImg}},[a("div",{staticClass:"y-single-upload-list",style:t.uploadListStyle},[""!==t.uploadImg?[a("img",{attrs:{src:t.uploadData,title:t.title,width:t.width,height:t.height}})]:t._e()],2),t._v(" "),a("Upload",{ref:"upload",staticClass:"y-single-upload-main",style:{width:this.width+"px"},attrs:{name:t.name,data:t.data,"show-upload-list":!1,"on-success":t.handleSuccess,action:t.action,headers:t.headers}},[a("div",{staticClass:"y-single-upload-button",style:t.uploadButtonStyle},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(i,s,!1,function(t){a("Nwhv")},null,null);e.default=h.exports}});